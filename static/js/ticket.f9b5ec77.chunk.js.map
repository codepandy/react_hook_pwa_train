{"version":3,"sources":["utils/request.js","components/Nav.js","components/useNav.js","utils/utils.js","components/Detail.js","ticket/action.js","ticket/reducers.js","ticket/store.js","ticket/context.js","ticket/Candidate.js","ticket/App.jsx","ticket/index.js","components/Header.jsx"],"names":["request","url","options","newOptions","_objectSpread","credentials","headers","Headers","Content-Type","fetch","then","response","status","msg","error","Error","json","catch","err","console","log","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","classnames__WEBPACK_IMPORTED_MODULE_1__","classnames__WEBPACK_IMPORTED_MODULE_1___default","dayjs__WEBPACK_IMPORTED_MODULE_2__","dayjs__WEBPACK_IMPORTED_MODULE_2___default","Nav","memo","props","date","onClickPre","onClickNext","isPreDisabled","isNextDisabled","currentString","useMemo","d","dayjs","format","locale","a","createElement","className","classnames","nav-disabled","onClick","__webpack_exports__","useNav","_utils_utils__WEBPACK_IMPORTED_MODULE_1__","departDate","setPrevDay","setNextDay","h0","useCallback","timestamp","arguments","length","undefined","Date","now","target","setHours","setMinutes","setSeconds","setMilliseconds","getTime","dayjs__WEBPACK_IMPORTED_MODULE_1__","dayjs__WEBPACK_IMPORTED_MODULE_1___default","formateDate","concat","Detail","arriveDate","departTimeStr","arriveTimeStr","departStation","arriveStation","trainNumber","durationStr","departDateStr","arriveDateStr","children","ACTION_SET_DEPARTDATE","ACTION_SET_ARRIVEDATE","ACTION_SET_DEPARTTIMESTR","ACTION_SET_ARRIVETIMESTR","ACTION_SET_DEPARTSTATION","ACTION_SET_ARRIVESTATION","ACTION_SET_TRAINNUMBER","ACTION_SET_DURATIONSTR","ACTION_SET_TICKETS","ACTION_SET_ISSCHEDULEVISIBLE","ACTION_SET_SEARCHPARSED","setDepartDate","payload","type","setArriveDate","setDepartTimeStr","setArriveTimeStr","setDurationStr","setTickets","setIsScheduleVisible","reducers","state","action","tickets","isScheduleVisible","searchParsed","createStore","combineReducers","applyMiddleware","thunk","TrainContext","createContext","Channel","name","desc","_useContext","useContext","src","URI","search","toString","react_default","href","Seat","priceMsg","ticketsLeft","channels","expanded","onToggle","idx","style","height","map","channel","Candidate_Channel","Object","assign","key","Candidate","_useState","useState","_useState2","slicedToArray","expandIndex","setExpandIndex","ticket","index","Candidate_Seat","Schedule","lazy","e","bind","connect","setDepartStation","setArriveStation","setTrainNumber","toggleIsScheduleVisible","dispatch","getState","setSearchParsed","fetchTickets","process","stringify","_ref","data","detail","candidates","fetchSchedule","callback","departRow","i","l","station","beforeDeaprtStation","isDepartStation","afterArriveStation","isArriveStation","isStartStation","isEndStation","useEffect","queries","parseQuery","window","location","aStation","dStation","valueOf","onBack","history","back","document","title","_useNav","Header","Provider","value","src_ticket_Candidate","react","fallback","ReactDOM","render","es","store","ticket_App","getElementById","width","points","stroke","strokeWidth","fill"],"mappings":"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","file":"static/js/ticket.f9b5ec77.chunk.js","sourcesContent":["// const codeMessage = {\n//   200: \"服务器成功返回请求的数据。\",\n//   201: \"新建或修改数据成功。\",\n//   202: \"一个请求已经进入后台排队（异步任务）。\",\n//   204: \"删除数据成功。\",\n//   400: \"发出的请求有错误，服务器没有进行新建或修改数据的操作。\",\n//   401: \"用户没有权限（令牌、用户名、密码错误）。\",\n//   403: \"用户得到授权，但是访问是被禁止的。\",\n//   404: \"发出的请求针对的是不存在的记录，服务器没有进行操作。\",\n//   406: \"请求的格式不可得。\",\n//   410: \"请求的资源被永久删除，且不会再得到的。\",\n//   422: \"当创建一个对象时，发生一个验证错误。\",\n//   500: \"服务器发生错误，请检查服务器。\",\n//   502: \"网关错误。\",\n//   503: \"服务不可用，服务器暂时过载或维护。\",\n//   504: \"网关超时。\",\n// };\n\nexport default function request(url, options) {\n  const defaultOptions = {\n    credentials: \"include\",\n    headers: new Headers({\n      \"Content-Type\": \"application/json\",\n    }),\n  };\n  const newOptions = {\n    ...defaultOptions,\n    ...options,\n  };\n  return fetch(url, newOptions)\n    .then(response => {\n      const { status, msg } = response;\n      if (status >= 200 && status < 300) {\n        return response;\n      }\n      const error = new Error(msg);\n      error.status = status;\n      error.response = response;\n      throw error;\n    })\n    .then(response => response.json())\n    .catch(err => {\n      console.log(\"网络请求失败！\");\n    });\n}\n","import React, { memo, useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport dayjs from \"dayjs\";\nimport \"dayjs/locale/zh-cn\";\nimport \"./Nav.css\";\n\nconst Nav = memo(function Nav(props) {\n  const { date, onClickPre, onClickNext, isPreDisabled, isNextDisabled } = props;\n  const currentString = useMemo(() => {\n    const d = dayjs(date);\n    return d.format(\"M月D日\") + d.locale(\"zh-cn\").format(\"ddd\");\n  }, [date]);\n  return (\n    <div className=\"nav\">\n      <span\n        className={classnames(\"nav-prev\", { \"nav-disabled\": isPreDisabled })}\n        onClick={onClickPre}\n      >\n        前一天\n      </span>\n      <span className=\"nav-current\">{currentString}</span>\n      <span\n        className={classnames(\"nav-next\", { \"nav-disabled\": isNextDisabled })}\n        onClick={onClickNext}\n      >\n        后一天\n      </span>\n    </div>\n  );\n});\n\nNav.propTypes = {\n  date: PropTypes.number.isRequired,\n  onClickPre: PropTypes.func.isRequired,\n  onClickNext: PropTypes.func.isRequired,\n  isPreDisabled: PropTypes.bool.isRequired,\n  isNextDisabled: PropTypes.bool.isRequired,\n};\n\nexport default Nav;\n","/**\n * 自定义hook，封装Nav参数的处理\n */\n\nimport { useCallback } from \"react\";\nimport { h0 } from \"../utils/utils\";\n\nexport default function useNav(departDate, setPrevDay, setNextDay) {\n  const isPreDisabled = h0(departDate) <= h0();\n  const isNextDisabled = h0(departDate) - h0() > 20 * 86400 * 1000;\n\n  const onClickPre = useCallback(() => {\n    if (isPreDisabled) {\n      return;\n    }\n    setPrevDay();\n  }, [isPreDisabled, setPrevDay]);\n  const onClickNext = useCallback(() => {\n    if (isNextDisabled) {\n      return;\n    }\n    setNextDay();\n  }, [isNextDisabled, setNextDay]);\n\n  return {\n    isPreDisabled,\n    isNextDisabled,\n    onClickPre,\n    onClickNext,\n  };\n}\n","export function h0(timestamp = Date.now()) {\n  const target = new Date(timestamp);\n  target.setHours(0);\n  target.setMinutes(0);\n  target.setSeconds(0);\n  target.setMilliseconds(0);\n\n  return target.getTime();\n}\n","import React, { memo, useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport dayjs from \"dayjs\";\nimport \"dayjs/locale/zh-cn\";\nimport \"./Detail.css\";\n\nfunction formateDate(date) {\n  const d = dayjs(date);\n  return `${d.format(\"MM-DD\")} ${d.locale(\"zh-cn\").format(\"ddd\")}`;\n}\n\nconst Detail = memo(function Detail(props) {\n  const {\n    departDate,\n    arriveDate,\n    departTimeStr,\n    arriveTimeStr,\n    departStation,\n    arriveStation,\n    trainNumber,\n    durationStr,\n  } = props;\n\n  const departDateStr = useMemo(() => formateDate(departDate), [departDate]);\n  const arriveDateStr = useMemo(() => formateDate(arriveDate), [arriveDate]);\n\n  return (\n    <div className=\"detail\">\n      <div className=\"content\">\n        <div className=\"left\">\n          <p className=\"city\">{departStation}</p>\n          <p className=\"time\">{departTimeStr}</p>\n          <p className=\"date\">{departDateStr}</p>\n        </div>\n        <div className=\"middle\">\n          <p className=\"train-name\">{trainNumber}</p>\n          <p className=\"train-mid\">{props.children}</p>\n          <p className=\"train-time\">耗时{durationStr}</p>\n        </div>\n        <div className=\"right\">\n          <p className=\"city\">{arriveStation}</p>\n          <p className=\"time\">{arriveTimeStr}</p>\n          <p className=\"date\">{arriveDateStr}</p>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nDetail.propTypes = {\n  departDate: PropTypes.number.isRequired,\n  arriveDate: PropTypes.number.isRequired,\n  departTimeStr: PropTypes.string,\n  arriveTimeStr: PropTypes.string,\n  departStation: PropTypes.string.isRequired,\n  arriveStation: PropTypes.string.isRequired,\n  trainNumber: PropTypes.string.isRequired,\n  durationStr: PropTypes.string,\n};\n\nexport default Detail;\n","import request from \"../utils/request\";\nimport { stringify } from \"qs\";\nexport const ACTION_SET_DEPARTDATE = \"ACTION_SET_DEPARTDATE\";\nexport const ACTION_SET_ARRIVEDATE = \"ACTION_SET_ARRIVEDATE\";\nexport const ACTION_SET_DEPARTTIMESTR = \"ACTION_SET_DEPARTTIMESTR\";\nexport const ACTION_SET_ARRIVETIMESTR = \"ACTION_SET_ARRIVETIMESTR\";\nexport const ACTION_SET_DEPARTSTATION = \"ACTION_SET_DEPARTSTATION\";\nexport const ACTION_SET_ARRIVESTATION = \"ACTION_SET_ARRIVESTATION\";\nexport const ACTION_SET_TRAINNUMBER = \"ACTION_SET_TRAINNUMBER\";\nexport const ACTION_SET_DURATIONSTR = \"ACTION_SET_DURATIONSTR\";\nexport const ACTION_SET_TICKETS = \"ACTION_SET_TICKETS\";\nexport const ACTION_SET_ISSCHEDULEVISIBLE = \"ACTION_SET_ISSCHEDULEVISIBLE\";\nexport const ACTION_SET_SEARCHPARSED = \"ACTION_SET_SEARCHPARSED\";\n\nexport function setDepartDate(payload) {\n  return {\n    type: ACTION_SET_DEPARTDATE,\n    payload,\n  };\n}\nexport function setArriveDate(payload) {\n  return {\n    type: ACTION_SET_ARRIVEDATE,\n    payload,\n  };\n}\nexport function setDepartTimeStr(payload) {\n  return {\n    type: ACTION_SET_DEPARTTIMESTR,\n    payload,\n  };\n}\nexport function setArriveTimeStr(payload) {\n  return {\n    type: ACTION_SET_ARRIVETIMESTR,\n    payload,\n  };\n}\nexport function setDepartStation(payload) {\n  return {\n    type: ACTION_SET_DEPARTSTATION,\n    payload,\n  };\n}\nexport function setArriveStation(payload) {\n  return {\n    type: ACTION_SET_ARRIVESTATION,\n    payload,\n  };\n}\nexport function setTrainNumber(payload) {\n  return {\n    type: ACTION_SET_TRAINNUMBER,\n    payload,\n  };\n}\nexport function setDurationStr(payload) {\n  return {\n    type: ACTION_SET_DURATIONSTR,\n    payload,\n  };\n}\nexport function setTickets(payload) {\n  return {\n    type: ACTION_SET_TICKETS,\n    payload,\n  };\n}\nexport function setIsScheduleVisible(payload) {\n  return {\n    type: ACTION_SET_ISSCHEDULEVISIBLE,\n    payload,\n  };\n}\n\nexport function toggleIsScheduleVisible() {\n  return (dispatch, getState) => {\n    const { isScheduleVisible } = getState();\n    dispatch(setIsScheduleVisible(!isScheduleVisible));\n  };\n}\n\nexport function setSearchParsed(payload) {\n  return {\n    type: ACTION_SET_SEARCHPARSED,\n    payload,\n  };\n}\n\nexport function setNextDay() {\n  return (dispatch, getState) => {\n    const { departDate } = getState();\n    dispatch(setDepartDate(departDate + 86400 * 1000));\n  };\n}\n\nexport function setPrevDay() {\n  return (dispatch, getState) => {\n    const { departDate } = getState();\n    dispatch(setDepartDate(departDate - 86400 * 1000));\n  };\n}\n\nexport function fetchTickets(payload) {\n  return (dispatch, getState) => {\n    request(`${process.env.REACT_APP_API_URl}/rest/ticket?${stringify(payload)}`).then(\n      ({ data }) => {\n        const { detail, candidates } = data;\n        const { departTimeStr, arriveTimeStr, arriveDate, durationStr } = detail;\n        dispatch(setDepartTimeStr(departTimeStr));\n        dispatch(setArriveTimeStr(arriveTimeStr));\n        dispatch(setArriveDate(arriveDate));\n        dispatch(setDurationStr(durationStr));\n        dispatch(setTickets(candidates));\n      }\n    );\n  };\n}\n\nexport function fetchSchedule(payload, callback) {\n  return () => {\n    request(`${process.env.REACT_APP_API_URl}/rest/schedule?${stringify(payload)}`).then(\n      response => {\n        const { data } = response;\n        const { departStation, arriveStation } = payload;\n        let departRow;\n        let arriveRow;\n\n        for (let i = 0, l = data.length; i < l; ++i) {\n          if (!departRow) {\n            if (data[i].station === departStation) {\n              departRow = Object.assign(data[i], {\n                beforeDeaprtStation: false,\n                isDepartStation: true,\n                afterArriveStation: false,\n                isArriveStation: false,\n              });\n            } else {\n              Object.assign(data[i], {\n                beforeDeaprtStation: true,\n                isDepartStation: false,\n                afterArriveStation: false,\n                isArriveStation: false,\n              });\n            }\n          } else if (!arriveRow) {\n            if (data[i].station === arriveStation) {\n              departRow = Object.assign(data[i], {\n                beforeDeaprtStation: false,\n                isDepartStation: false,\n                afterArriveStation: false,\n                isArriveStation: true,\n              });\n            } else {\n              Object.assign(data[i], {\n                beforeDeaprtStation: false,\n                isDepartStation: false,\n                afterArriveStation: true,\n                isArriveStation: false,\n              });\n            }\n          } else {\n            Object.assign(data[i], {\n              beforeDeaprtStation: false,\n              isDepartStation: false,\n              afterArriveStation: true,\n              isArriveStation: false,\n            });\n          }\n          Object.assign(data[i], {\n            isStartStation: i === 0,\n            isEndStation: i === data.length - 1,\n          });\n        }\n\n        if (callback) callback(data);\n      }\n    );\n  };\n}\n","import {\n  ACTION_SET_DEPARTDATE,\n  ACTION_SET_ARRIVEDATE,\n  ACTION_SET_DEPARTTIMESTR,\n  ACTION_SET_ARRIVETIMESTR,\n  ACTION_SET_DEPARTSTATION,\n  ACTION_SET_ARRIVESTATION,\n  ACTION_SET_TRAINNUMBER,\n  ACTION_SET_DURATIONSTR,\n  ACTION_SET_TICKETS,\n  ACTION_SET_ISSCHEDULEVISIBLE,\n  ACTION_SET_SEARCHPARSED,\n} from \"./action\";\n\nexport default {\n  departDate(state = Date.now(), action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_DEPARTDATE:\n        return payload;\n      default:\n        return state;\n    }\n  },\n  arriveDate(state = Date.now(), action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_ARRIVEDATE:\n        return payload;\n      default:\n        return state;\n    }\n  },\n  departTimeStr(state = null, action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_DEPARTTIMESTR:\n        return payload;\n      default:\n        return state;\n    }\n  },\n  arriveTimeStr(state = null, action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_ARRIVETIMESTR:\n        return payload;\n      default:\n        return state;\n    }\n  },\n  departStation(state = null, action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_DEPARTSTATION:\n        return payload;\n      default:\n        return state;\n    }\n  },\n  arriveStation(state = null, action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_ARRIVESTATION:\n        return payload;\n      default:\n        return state;\n    }\n  },\n  trainNumber(state = null, action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_TRAINNUMBER:\n        return payload;\n      default:\n        return state;\n    }\n  },\n  durationStr(state = null, action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_DURATIONSTR:\n        return payload;\n      default:\n        return state;\n    }\n  },\n  tickets(state = [], action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_TICKETS:\n        return payload;\n      default:\n        return state;\n    }\n  },\n  isScheduleVisible(state = false, action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_ISSCHEDULEVISIBLE:\n        return payload;\n      default:\n        return state;\n    }\n  },\n  searchParsed(state = false, action) {\n    const { type, payload } = action;\n    switch (type) {\n      case ACTION_SET_SEARCHPARSED:\n        return payload;\n      default:\n        return state;\n    }\n  },\n};\n","import { createStore, combineReducers, applyMiddleware } from \"redux\";\nimport reducers from \"./reducers\";\nimport thunk from \"redux-thunk\";\n\nexport default createStore(\n  combineReducers(reducers),\n  {\n    // 出发日期\n    departDate: Date.now(),\n    arriveDate: Date.now(),\n    // 触发时间\n    departTimeStr: null,\n    arriveTimeStr: null,\n    departStation: null,\n    arriveStation: null,\n    // 车次\n    trainNumber: null,\n    // 运行时间\n    durationStr: null,\n    //座次数组\n    tickets: [],\n    // 是否显示时刻表\n    isScheduleVisible: false,\n    // 是否该进行异步请求和渲染\n    searchParsed: false,\n  },\n  applyMiddleware(thunk)\n);\n","import { createContext } from \"react\";\n\nexport const TrainContext = createContext();\n","import React, { memo, useState, useCallback, useContext, useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport URI from \"urijs\";\nimport dayjs from \"dayjs\";\nimport \"./Candidate.css\";\nimport { TrainContext } from \"./context\";\n\nconst Channel = memo(function Channel(props) {\n  const { name, desc, type } = props;\n  const { trainNumber, departStation, arriveStation, departDate } = useContext(TrainContext);\n\n  const src = useMemo(() => {\n    return new URI(\"order.html\")\n      .search({\n        trainNumber,\n        departStation,\n        arriveStation,\n        departDate: dayjs(departDate).format(\"YYYY-MM-DD\"),\n        type,\n      })\n      .toString();\n  }, [arriveStation, departDate, departStation, trainNumber, type]);\n\n  return (\n    <div className=\"channel\">\n      <div className=\"middle\">\n        <div className=\"name\">{name}</div>\n        <div className=\"desc\">{desc}</div>\n      </div>\n      <a href={src} className=\"buy-wrapper\">\n        <div className=\"buy\">买票</div>\n      </a>\n    </div>\n  );\n});\n\nChannel.propTypes = {\n  name: PropTypes.string.isRequired,\n  desc: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nconst Seat = memo(function Seat(props) {\n  const { type, priceMsg, ticketsLeft, channels, expanded, onToggle, idx } = props;\n\n  return (\n    <li>\n      <div\n        className=\"bar\"\n        onClick={() => {\n          onToggle(idx);\n        }}\n      >\n        <span className=\"seat\">{type}</span>\n        <span className=\"price\">\n          <i>￥</i>\n          {priceMsg}\n        </span>\n        <span className=\"btn\">{expanded ? \"收起\" : \"预订\"}</span>\n        <span className=\"num\">{ticketsLeft}</span>\n      </div>\n      <div className=\"channels\" style={{ height: expanded ? channels.length * 55 + \"px\" : 0 }}>\n        {channels.map(channel => (\n          <Channel key={channel.name} {...channel} type={type} />\n        ))}\n      </div>\n    </li>\n  );\n});\n\nSeat.propTypes = {\n  type: PropTypes.string.isRequired,\n  priceMsg: PropTypes.string.isRequired,\n  ticketsLeft: PropTypes.string.isRequired,\n  channels: PropTypes.array.isRequired,\n  expanded: PropTypes.bool.isRequired,\n  onToggle: PropTypes.func.isRequired,\n};\n\nconst Candidate = memo(function Candidate(props) {\n  const { tickets } = props;\n  const [expandIndex, setExpandIndex] = useState(0);\n\n  const onToggle = useCallback(\n    idx => {\n      setExpandIndex(idx === expandIndex ? -1 : idx);\n    },\n    [expandIndex]\n  );\n\n  return (\n    <div className=\"candidate\">\n      <ul>\n        {tickets.map((ticket, index) => (\n          <Seat\n            idx={index}\n            expanded={expandIndex === index}\n            key={ticket.type}\n            {...ticket}\n            onToggle={onToggle}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n});\n\nCandidate.propTypes = {\n  tickets: PropTypes.array.isRequired,\n};\n\nexport default Candidate;\n","import React, { useCallback, useEffect, lazy, Suspense } from \"react\";\nimport { connect } from \"react-redux\";\nimport URI from \"urijs\";\nimport dayjs from \"dayjs\";\nimport Header from \"../components/Header\";\nimport Nav from \"../components/Nav\";\nimport { h0 } from \"../utils/utils\";\nimport useNav from \"../components/useNav\";\nimport Detail from \"../components/Detail\";\nimport Candidate from \"./Candidate\";\nimport { TrainContext } from \"./context\";\n// import Schedule from \"./Schedule\";\nimport {\n  setDepartDate,\n  setArriveDate,\n  setDepartTimeStr,\n  setArriveTimeStr,\n  setDepartStation,\n  setArriveStation,\n  setTrainNumber,\n  setDurationStr,\n  setTickets,\n  setIsScheduleVisible,\n  toggleIsScheduleVisible,\n  setSearchParsed,\n  setNextDay,\n  setPrevDay,\n  fetchTickets,\n  fetchSchedule,\n} from \"./action\";\nimport \"./App.css\";\n\nconst Schedule = lazy(() => import(\"./Schedule.js\"));\n\nfunction App(props) {\n  const {\n    departDate,\n    arriveDate,\n    departTimeStr,\n    arriveTimeStr,\n    departStation,\n    arriveStation,\n    trainNumber,\n    durationStr,\n    tickets,\n    isScheduleVisible,\n    setArriveStation,\n    setDepartStation,\n    setTrainNumber,\n    setDepartDate,\n    searchParsed,\n    setSearchParsed,\n    setNextDay,\n    setPrevDay,\n    fetchTickets,\n    toggleIsScheduleVisible,\n    fetchSchedule,\n  } = props;\n\n  useEffect(() => {\n    const queries = URI.parseQuery(window.location.search);\n    const { aStation, dStation, date, trainNumber } = queries;\n    setArriveStation(aStation);\n    setDepartStation(dStation);\n    setTrainNumber(trainNumber);\n    setDepartDate(h0(dayjs(date).valueOf()));\n    setSearchParsed(true);\n  }, [setArriveStation, setDepartDate, setDepartStation, setSearchParsed, setTrainNumber]);\n\n  const onBack = useCallback(() => {\n    window.history.back();\n  }, []);\n\n  useEffect(() => {\n    document.title = trainNumber;\n  }, [trainNumber]);\n\n  const { isPreDisabled, isNextDisabled, onClickPre, onClickNext } = useNav(\n    departDate,\n    setPrevDay,\n    setNextDay\n  );\n\n  useEffect(() => {\n    fetchTickets({ date: dayjs(departDate).format(\"YYYY-MM-DD\"), trainNumber });\n  }, [departDate, fetchTickets, trainNumber]);\n\n  if (!searchParsed) {\n    return null;\n  }\n\n  return (\n    <div className=\"app\">\n      <div className=\"header-wrapper\">\n        <Header title={trainNumber} onBack={onBack} />\n      </div>\n      <div className=\"nav-wrapper\">\n        <Nav\n          date={departDate}\n          isPreDisabled={isPreDisabled}\n          isNextDisabled={isNextDisabled}\n          onClickPre={onClickPre}\n          onClickNext={onClickNext}\n        />\n      </div>\n      <div className=\"detail-wrapper\">\n        <Detail\n          departDate={departDate}\n          arriveDate={arriveDate}\n          departTimeStr={departTimeStr}\n          arriveTimeStr={arriveTimeStr}\n          departStation={departStation}\n          arriveStation={arriveStation}\n          trainNumber={trainNumber}\n          durationStr={durationStr}\n        >\n          <span className=\"left\"></span>\n          <span className=\"schedule\" onClick={() => toggleIsScheduleVisible()}>\n            时刻表\n          </span>\n          <span className=\"right\"></span>\n        </Detail>\n      </div>\n\n      <TrainContext.Provider value={{ trainNumber, departStation, arriveStation, departDate }}>\n        <Candidate tickets={tickets} />\n      </TrainContext.Provider>\n\n      {isScheduleVisible ? (\n        <div className=\"mask\" onClick={() => toggleIsScheduleVisible()}>\n          <Suspense fallback={<div>组件动态加载中……</div>}>\n            <Schedule\n              date={departDate}\n              trainNumber={trainNumber}\n              departStation={departStation}\n              arriveStation={arriveStation}\n              fetchSchedule={fetchSchedule}\n            />\n          </Suspense>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport default connect(\n  state => state,\n  {\n    setDepartDate,\n    setArriveDate,\n    setDepartTimeStr,\n    setArriveTimeStr,\n    setDepartStation,\n    setArriveStation,\n    setTrainNumber,\n    setDurationStr,\n    setTickets,\n    setIsScheduleVisible,\n    toggleIsScheduleVisible,\n    setSearchParsed,\n    setNextDay,\n    setPrevDay,\n    fetchTickets,\n    fetchSchedule,\n  }\n)(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"normalize.css/normalize.css\";\nimport store from \"./store\";\nimport \"./index.css\";\nimport App from \"./App.jsx\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./Header.css\";\n\nexport default function Header(props) {\n  const { onBack, title } = props;\n  return (\n    <div className=\"header\">\n      <div className=\"header-back\" onClick={onBack}>\n        <svg width=\"42\" height=\"42\">\n          <polyline\n            points=\"25,13 16,21 25,29\"\n            stroke=\"#fff\"\n            strokeWidth=\"2\"\n            fill=\"none\"\n          />\n        </svg>\n      </div>\n      <h1 className=\"header-title\">{title}</h1>\n    </div>\n  );\n}\n\nHeader.propTypes = {\n  onBack: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired,\n};\n"],"sourceRoot":""}
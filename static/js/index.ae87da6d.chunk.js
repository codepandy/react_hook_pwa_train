(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{10:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(7);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function r(e,t){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},{credentials:"include",headers:new Headers({"Content-Type":"application/json"})},{},t);return fetch(e,a).then(function(e){var t=e.status,a=e.msg;if(t>=200&&t<300)return e;var n=new Error(a);throw n.status=t,n.response=e,n}).then(function(e){return e.json()}).catch(function(e){console.log("\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25\uff01")})}},16:function(e,t,a){},2:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=new Date(e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}a.d(t,"a",function(){return n})},37:function(e,t,a){e.exports=a.p+"static/media/switch.b672b5fb.svg"},38:function(e,t,a){e.exports=a(78)},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),i=a.n(r),o=a(6),l=(a(21),a(5)),s=a(13),u=a(10),m=a(8),d="ACTION_SET_FROM",f="ACTION_SET_TO",y="ACTION_SET_IS_CITY_SELECTOR_VISIBLE",h="ACTION_SET_CURRENT_SELECTING_LEFT_CITY",p="ACTION_SET_CITY_DATA",g="ACTION_SET_IS_LOADING_CITY_DATA",E="ACTION_SET_IS_DATE_SELECTOR_VISIBLE",v="ACTION_SET_HIGH_SPEED",C="ACTION_SET_SEARCH_CITY_DATA",b="ACTION_SET_DEPART_DATE";function S(e){return{type:d,payload:e}}function D(e){return{type:f,payload:e}}function w(e){return{type:p,payload:e}}function O(e){return{type:g,payload:e}}function k(){return{type:y,payload:!1}}var N={from:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u5317\u4eac",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case d:return n;default:return e}},to:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u4e0a\u6d77",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case f:return n;default:return e}},isCitySelectorVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case y:return n;default:return e}},currentSelectingLeftCity:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case h:return n;default:return e}},cityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case p:return n;default:return e}},isLoadingCityData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case g:return n;default:return e}},isDateSelectorVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case E:return n;default:return e}},highSpeed:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case v:return n;default:return e}},searchCityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case C:return n;default:return e}},departDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case b:return n;default:return e}}},j=a(15),T=Object(l.d)(Object(l.c)(N),{from:"\u5317\u4eac",to:"\u4e0a\u6d77",isCitySelectorVisible:!1,currentSelectingLeftCity:!1,cityData:null,isLoadingCityData:!1,isDateSelectorVisible:!1,highSpeed:!1,searchCityData:[],departDate:Date.now()},Object(l.a)(j.a)),_=(a(49),a(50),a(9)),I=a(3),A=a.n(I),M=a(2);a(51);function B(e){var t=e.time,a=e.onClick,r=Object(M.a)(t),i=new Date(r),o=Object(n.useMemo)(function(){return A()(r).format("YYYY-MM-DD")},[r]),l=r===Object(M.a)(),s="\u5468"+["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"][i.getDay()]+(l?"(\u4eca\u5929)":""),u=Object(n.useCallback)(function(){a(!0)},[a]);return c.a.createElement("div",{className:"depart-date",onClick:u},c.a.createElement("input",{type:"hidden",name:"date",value:o}),o,c.a.createElement("span",{className:"depart-week"},s))}var L=a(1),x=a.n(L);a(52);function Y(e){var t=e.highSpeed,a=e.toggle;return c.a.createElement("div",{className:"high-speed"},c.a.createElement("div",{className:"high-speed-label"},"\u53ea\u770b\u9ad8\u94c1/\u52a8\u8f66"),c.a.createElement("div",{className:"high-speed-switch",onClick:function(){return a()}},c.a.createElement("input",{type:"hidden",name:"highSpeed",value:t}),c.a.createElement("div",{className:x()("high-speed-track",{checked:t})},c.a.createElement("span",{className:x()("high-speed-handle",{checked:t})}))))}a(53);var V=a(37),P=a.n(V);function F(e){var t=e.from,a=e.to,n=e.exchangeFromTo,r=e.showCitySelector;return c.a.createElement("div",{className:"journey"},c.a.createElement("div",{className:"journey-station",onClick:function(){r(!0)}},c.a.createElement("input",{type:"text",readOnly:!0,className:"journey-input",name:"from",value:t})),c.a.createElement("div",{className:"journey-switch",onClick:n},c.a.createElement("img",{className:"journey-switch-reverse",src:P.a,alt:"\u5207\u6362\u57ce\u5e02",width:"70",height:"40"})),c.a.createElement("div",{className:"journey-station",onClick:function(){r(!1)}},c.a.createElement("input",{type:"text",readOnly:!0,className:"journey-input",name:"to",value:a})))}a(54);var H=Object(n.memo)(function(){return c.a.createElement("div",{className:"submit"},c.a.createElement("button",{type:"submit",className:"submit-button"},"\u641c\u7d22"))}),R=a(4),J=(a(55),Object(n.memo)(function(e){var t=e.name,a=e.onSelect;return c.a.createElement("li",{className:"city-li",onClick:function(){return a(t)}},t)})),G=Object(n.memo)(function(e){var t=e.title,a=e.cities,n=void 0===a?[]:a,r=e.onSelect;return c.a.createElement("ul",{className:"city-ul"},c.a.createElement("li",{className:"city-li",key:t,"data-cate":t},t),n.map(function(e){return c.a.createElement(J,{key:e.name,name:e.name,onSelect:r})}))}),K=Object(n.memo)(function(e){var t=e.alpha,a=e.onClick,r=Object(n.useCallback)(function(){a(t)},[t,a]);return c.a.createElement("i",{className:"city-index-item",onClick:r},t)}),q=Object(n.memo)(function(e){var t=e.sections,a=e.onSelect,n=e.toAlpha;return c.a.createElement("div",{className:"city-list"},c.a.createElement("div",{className:"city-cate"},t.map(function(e){return c.a.createElement(G,{key:e.title,title:e.title,cities:e.citys,onSelect:a})})),c.a.createElement("div",{className:"city-index"},W.map(function(e){return c.a.createElement(K,{alpha:e,key:e,onClick:n})})))}),W=Array.from(new Array(26),function(e,t){return String.fromCharCode(65+t)}),U=Object(n.memo)(function(e){var t=e.name,a=e.onClick;return c.a.createElement("li",{className:"city-sugget-li",onClick:function(){return a(t)}},t)}),z=Object(n.memo)(function(e){var t=e.searchKey,a=e.onSelect,r=e.searchCityData,i=e.fetchCityDataByCity;Object(n.useEffect)(function(){i({key:t})},[i,t]);var o=Object(n.useMemo)(function(){return r.length?r:[{display:t}]},[r,t]);return c.a.createElement("div",{className:"city-suggest"},c.a.createElement("ul",{className:"city-suggest-ul"},o.map(function(e){return c.a.createElement(U,{key:e.display,name:e.display,onClick:a})})))}),Q=Object(n.memo)(function(e){var t=Object(n.useState)(""),a=Object(R.a)(t,2),r=a[0],i=a[1],o=e.show,l=e.cityData,s=e.isLoading,u=e.onBack,m=e.fetchCityData,d=e.onSelect,f=e.fetchCityDataByCity,y=e.searchCityData,h=Object(n.useMemo)(function(){return r.trim()},[r]),p=Object(n.useCallback)(function(e){i(e.target.value)},[]);Object(n.useEffect)(function(){!o||l||s||m()},[l,m,s,o]);var g=function(e){document.querySelector("[data-cate='".concat(e,"']")).scrollIntoView()};return c.a.createElement("div",{className:x()("city-selector",{hidden:!o})},c.a.createElement("div",{className:"city-search"},c.a.createElement("div",{className:"search-back",onClick:u},c.a.createElement("svg",{width:"42",height:"42"},c.a.createElement("polyline",{points:"25,13 16,21 25,29",stroke:"#fff",strokeWidth:"2",fill:"none"}))),c.a.createElement("div",{className:"search-input-wrapper"},c.a.createElement("input",{type:"text",className:"search-input",value:r,placeholder:"\u57ce\u5e02\u3001\u8f66\u7ad9\u7684\u4e2d\u6587\u6216\u62fc\u97f3",onChange:p})),c.a.createElement("i",{onClick:function(){i("")},className:x()("search-clean",{hidden:0===h.length})},"\uf063")),Boolean(h)?c.a.createElement(z,{searchKey:h,onSelect:function(e){return d(e)},fetchCityDataByCity:f,searchCityData:y}):null,s?c.a.createElement("div",null,"loading"):l?c.a.createElement(q,{sections:l.cityData.cityList,onSelect:d,toAlpha:g}):c.a.createElement("div",null,"loading"))});a(56);function X(e){var t=e.day,a=e.onSelect,n=Object(M.a)();return c.a.createElement("td",{className:x()({null:!t},{disabled:t&&t<n},{weekend:[0,6].includes(new Date(t).getDay())}),onClick:function(){return a(t)}},t?t===n?"\u4eca\u5929":new Date(t).getDate():"")}function Z(e){var t=e.days,a=e.onSelect;return c.a.createElement("tr",{className:"date-table-days"},t.map(function(e,t){return c.a.createElement(X,{key:t,day:e,onSelect:a})}))}function $(e){for(var t=e.startingTimeInMonth,a=e.onSelect,n=new Date(t),r=new Date(t),i=[];n.getMonth()===r.getMonth();)i.push(r.getTime()),r.setDate(r.getDate()+1);i=new Array(n.getDay()?n.getDay()-1:6).fill(null).concat(i);for(var o=new Date(i[i.length-1]),l=[],s=0,u=(i=i.concat(new Array(o.getDay()?7-o.getDay():0))).length/7;s<u;s++)l.push(i.slice(7*s,7*(s+1)));return c.a.createElement("table",{className:"date-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"7"},c.a.createElement("h5",null,"".concat(n.getFullYear(),"\u5e74").concat(n.getMonth(),"\u6708"))))),c.a.createElement("tbody",null,c.a.createElement("tr",{className:"date-table-weeks"},["\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94"].map(function(e){return c.a.createElement("th",{key:e},e)}),c.a.createElement("th",{className:"weekend"},"\u5468\u516d"),c.a.createElement("th",{className:"weekend"},"\u5468\u65e5")),l.map(function(e,t){return c.a.createElement(Z,{days:e,key:t,onSelect:a})})))}function ee(e){var t=e.show,a=e.onSelect,r=e.onBack,i=Object(n.useCallback)(function(){r(!1)},[r]),o=new Date;o.setDate(1),o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0);var l=[o.getTime()];return o.setMonth(o.getMonth()+1),l.push(o.getTime()),o.setMonth(o.getMonth()+1),l.push(o.getTime()),c.a.createElement("div",{className:x()("date-selector",{hidden:!t})},c.a.createElement(_.a,{title:"\u65e5\u671f\u9009\u62e9",onBack:i}),c.a.createElement("div",{className:"date-selector-tables"},l.map(function(e){return c.a.createElement($,{key:e,startingTimeInMonth:e,onSelect:a})})))}var te=Object(o.b)(function(e){return e},{onExchangeFromTo:function(){return function(e,t){var a=t(),n=a.from;e(S(a.to)),e(D(n))}},onShowCitySelector:function(e){return function(t){t({type:y,payload:!0}),t({type:h,payload:e})}},onFetchCityData:function(){return function(e,t){if(!t().isLoadingCityData){var a=JSON.parse(localStorage.getItem(m.a)||"{}");if(a.expires&&a.expires>Date.now())return e(w(a)),void e(O(!1));Object(u.a)("".concat("https://www.easy-mock.com/mock/5d6c71f9a4fd821df12f8c4e/reacthook","/rest/citys?_").concat(Date.now())).then(function(t){var a=t.data;localStorage.setItem(m.a,JSON.stringify(a)),e(w(a)),e(O(!1))})}}},setSelectedCity:function(e){return function(t,a){t(a().currentSelectingLeftCity?S(e):D(e)),t(k())}},hideCitySelector:k,fetchCityDataByCity:function(e){return function(t){Object(u.a)("".concat("https://www.easy-mock.com/mock/5d6c71f9a4fd821df12f8c4e/reacthook","/rest/searchCity?").concat(Object(s.stringify)(e))).then(function(e){var a=e.data.result;t({type:C,payload:a})})}},SetDateSelectorVisible:function(e){return{type:E,payload:e}},setDepartDate:function(e){return{type:b,payload:e}},toggleHighSpeed:function(){return function(e,t){var a=t().highSpeed;return e({type:v,payload:!a})}}})(function(e){var t=e.from,a=e.to,r=e.onExchangeFromTo,i=e.isCitySelectorVisible,o=e.cityData,l=e.isLoadingCityData,s=e.onShowCitySelector,u=e.onFetchCityData,m=e.setSelectedCity,d=e.hideCitySelector,f=e.fetchCityDataByCity,y=e.searchCityData,h=e.SetDateSelectorVisible,p=e.departDate,g=e.isDateSelectorVisible,E=e.setDepartDate,v=e.toggleHighSpeed,C=e.highSpeed,b=Object(n.useCallback)(function(){window.history.back()},[]),S=Object(n.useCallback)(function(e){return s(e)},[s]),D=Object(n.useCallback)(function(e){!e||e<Object(M.a)()||(E(e),h(!1))},[h,E]);return c.a.createElement("div",null,c.a.createElement("div",{className:"header-wrapper"},c.a.createElement(_.a,{title:"\u5546\u5bb6\u7248",onBack:b})),c.a.createElement("form",{action:"./query.html",className:"form"},c.a.createElement(F,{from:t,to:a,exchangeFromTo:r,showCitySelector:S}),c.a.createElement(B,{onClick:h,time:p}),c.a.createElement(Y,{highSpeed:C,toggle:v}),c.a.createElement(H,null)),c.a.createElement(Q,{show:i,cityData:o,isLoading:l,onBack:d,fetchCityData:u,onSelect:m,fetchCityDataByCity:f,searchCityData:y}),c.a.createElement(ee,{show:g,onBack:h,onSelect:D}))});i.a.render(c.a.createElement(o.a,{store:T},c.a.createElement(te,null)),document.getElementById("root"))},8:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return c});var n="CITY_DATA_CATCH_KEY",c={orderDepart:1,orderDuration:2}},9:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(0),c=a.n(n);a(16);function r(e){var t=e.onBack,a=e.title;return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header-back",onClick:t},c.a.createElement("svg",{width:"42",height:"42"},c.a.createElement("polyline",{points:"25,13 16,21 25,29",stroke:"#fff",strokeWidth:"2",fill:"none"}))),c.a.createElement("h1",{className:"header-title"},a))}}},[[38,5,0]]]);
//# sourceMappingURL=index.ae87da6d.chunk.js.map
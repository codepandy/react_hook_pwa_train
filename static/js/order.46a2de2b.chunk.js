(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{10:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(7);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function l(e,t){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},{credentials:"include",headers:new Headers({"Content-Type":"application/json"})},{},t);return fetch(e,a).then(function(e){var t=e.status,a=e.msg;if(t>=200&&t<300)return e;var n=new Error(a);throw n.status=t,n.response=e,n}).then(function(e){return e.json()}).catch(function(e){console.log("\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25\uff01")})}},16:function(e,t,a){},20:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(3),i=a.n(l);a(22),a(25);function c(e){var t=i()(e);return"".concat(t.format("MM-DD")," ").concat(t.locale("zh-cn").format("ddd"))}var o=Object(n.memo)(function(e){var t=e.departDate,a=e.arriveDate,l=e.departTimeStr,i=e.arriveTimeStr,o=e.departStation,u=e.arriveStation,s=e.trainNumber,d=e.durationStr,m=Object(n.useMemo)(function(){return c(t)},[t]),p=Object(n.useMemo)(function(){return c(a)},[a]);return r.a.createElement("div",{className:"detail"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"left"},r.a.createElement("p",{className:"city"},o),r.a.createElement("p",{className:"time"},l),r.a.createElement("p",{className:"date"},m)),r.a.createElement("div",{className:"middle"},r.a.createElement("p",{className:"train-name"},s),r.a.createElement("p",{className:"train-mid"},e.children),r.a.createElement("p",{className:"train-time"},"\u8017\u65f6",d)),r.a.createElement("div",{className:"right"},r.a.createElement("p",{className:"city"},u),r.a.createElement("p",{className:"time"},i),r.a.createElement("p",{className:"date"},p))))});t.a=o},25:function(e,t,a){},65:function(e,t,a){e.exports=a(77)},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),i=a.n(l),c=a(6),o=(a(21),a(5)),u=a(7);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d=a(10),m=a(13);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var v="SET_ACTION_TRAINNUMBER",y="SET_ACTION_DEPARTSTATION",h="SET_ACTION_ARRIVESTATION",E="SET_ACTION_SEATTYPE",g="SET_ACTION_DEPARTDATE",N="SET_ACTION_ARRIVEDATE",b="SET_ACTION_DEPARTTIMESTR",w="SET_ACTION_ARRIVETIMESTR",T="SET_ACTION_DURATIONSTR",O="SET_ACTION_PRICE",S="SET_ACTION_PASSENGERS",A="SET_ACTION_MENU",k="SET_ACTION_ISMENUVISIBLE",j="SET_ACTION_SEARCHPARSED";function P(e){return{type:S,payload:e}}function C(e){return{type:k,payload:e}}var D=0;function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(a,n){for(var r=n().passengers,l=0,i=r.length;l<i;++l)if(r[l].id===e.id){r[l]=Object.assign({},f({},r[l]),f({},e));var c=!0,o=!1,u=void 0;try{for(var d,m=t[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var p=d.value;delete r[l][p]}}catch(v){o=!0,u=v}finally{try{c||null==m.return||m.return()}finally{if(o)throw u}}break}a(P(s(r)))}}function I(e){return function(t){t({type:A,payload:e}),t(C(!0))}}function _(){return function(e){e(C(!1))}}var R={trainNumber:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case v:return n;default:return e}},departStation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case y:return n;default:return e}},arriveStation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case h:return n;default:return e}},seatType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case E:return n;default:return e}},departDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case g:return n;default:return e}},arriveDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case N:return n;default:return e}},departTimeStr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case b:return n;default:return e}},arriveTimeStr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case w:return n;default:return e}},durationStr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case T:return n;default:return e}},price:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case O:return n;default:return e}},passengers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case S:return n;default:return e}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case A:return n;default:return e}},isMenuVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case k:return n;default:return e}},searchParsed:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case j:return n;default:return e}}},x=a(15),F=Object(o.d)(Object(o.c)(R),{trainNumber:null,departStation:null,arriveStation:null,seatType:null,departDate:Date.now(),arriveDate:Date.now(),departTimeStr:null,arriveTimeStr:null,durationStr:null,price:null,passengers:[],menu:null,isMenuVisible:!1,searchParsed:!1},Object(o.a)(x.a)),U=(a(66),a(12)),G=a.n(U),V=a(3),B=a.n(V),H=a(9),J=a(4),Z=a(1),z=a.n(Z),L=(a(67),Object(n.memo)(function(e){var t=e.price,a=void 0===t?0:t,l=e.length,i=Object(n.useState)(!1),c=Object(J.a)(i,2),o=c[0],u=c[1];return r.a.createElement("div",{className:"account"},r.a.createElement("div",{className:z()("price",{expanded:o}),onClick:function(){return u(!o)}},r.a.createElement("div",{className:"money"},l*a),r.a.createElement("div",{className:"amount"},"\u652f\u4ed8\u91d1\u989d")),r.a.createElement("div",{className:"button"},"\u63d0\u4ea4\u6309\u94ae"),r.a.createElement("div",{className:z()("layer",{hidden:!o}),onClick:function(){return u(!1)}}),r.a.createElement("div",{className:z()("detail",{hidden:!o}),onClick:function(){return u(!1)}},r.a.createElement("div",{className:"title"},"\u91d1\u989d\u8be6\u60c5"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",null,"\u706b\u8f66\u7968"),r.a.createElement("span",null,"\uffe5",a),r.a.createElement("span",null,"\xd7",l)))))})),Q=(a(68),Object(n.memo)(function(e){var t=e.passengers,a=e.updatePassenger;function n(e){return r.a.createElement("div",null,t.map(function(t){return r.a.createElement("p",{key:t.id,className:z()("seat",{active:t.seat===e}),"data-text":e,onClick:function(){return a({id:t.id,seat:e})}},"\ue02d")}))}return r.a.createElement("div",{className:"choose"},r.a.createElement("p",{className:"tip"},"\u5728\u7ebf\u9009\u5ea7"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"seats"},r.a.createElement("div",null,"\u7a97"),n("A"),n("B"),n("C"),r.a.createElement("div",null,"\u8fc7\u9053"),n("D"),n("E"),r.a.createElement("div",null,"\u7a97"))))})),W=(a(69),Object(n.memo)(function(e){var t=e.id,a=e.name,n=e.ticketType,l=e.licenceNo,i=e.gender,c=e.birthday,o=e.removePassenger,u=e.onUpdate,s=e.showGenderMenu,d=e.showFollowAdultMenu,m=e.showTicketTypeMenu,p=e.followAdultName,f="adult"===n;return r.a.createElement("li",{className:"passenger"},r.a.createElement("i",{className:"delete",onClick:function(){return o(t)}},"\u2014"),r.a.createElement("ol",{className:"items"},r.a.createElement("li",{className:"item "},r.a.createElement("label",{htmlFor:"",className:"label name"},"\u59d3\u540d"),r.a.createElement("input",{type:"text",className:"input name",placeholder:"\u4e58\u5ba2\u59d3\u540d",value:a,onChange:function(e){return u({id:t,name:e.target.value})}}),r.a.createElement("label",{htmlFor:"",className:"ticket-type",onClick:function(){return m(t)}},f?"\u6210\u4eba\u7968":"\u513f\u7ae5\u7968")),f?r.a.createElement("li",{className:"item "},r.a.createElement("label",{htmlFor:"",className:"label licenceNo"},"\u8eab\u4efd\u8bc1"),r.a.createElement("input",{type:"text",className:"input licenceNo",placeholder:"\u8bc1\u4ef6\u53f7\u7801",value:l,onChange:function(e){return u({id:t,licenceNo:e.target.value})}})):null,f?null:r.a.createElement("li",{className:"item "},r.a.createElement("label",{htmlFor:"",className:"label gender"},"\u6027\u522b"),r.a.createElement("input",{type:"text",className:"input gender",placeholder:"\u8bf7\u9009\u62e9",value:"male"===i?"\u7537":"female"===i?"\u5973":"",readOnly:!0,onClick:function(){return s(t)}})),f?null:r.a.createElement("li",{className:"item "},r.a.createElement("label",{htmlFor:"",className:"label birthday"},"\u51fa\u751f\u65e5\u671f"),r.a.createElement("input",{type:"text",className:"input birthday",placeholder:"\u5982 19900102",value:c,onChange:function(e){return u({id:t,birthday:e.target.value})}})),f?null:r.a.createElement("li",{className:"item arrow"},r.a.createElement("label",{htmlFor:"",className:"label followAdult"},"\u540c\u884c\u6210\u4eba"),r.a.createElement("input",{type:"text",className:"input followAdult",placeholder:"\u8bf7\u9009\u62e9",value:p,onClick:function(){return d(t)},readOnly:!0}))))})),Y=Object(n.memo)(function(e){var t=e.passengers,a=e.createAdult,l=e.createChild,i=e.removePassenger,c=e.onUpdate,o=e.showGenderMenu,u=e.showFollowAdultMenu,s=e.showTicketTypeMenu,d=Object(n.useMemo)(function(){var e={},a=!0,n=!1,r=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var c=l.value;e[c.id]=c.name}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return e},[t]);return r.a.createElement("div",{className:"passengers"},r.a.createElement("ul",null,t.map(function(e){return r.a.createElement(W,Object.assign({},e,{key:e.id,removePassenger:i,onUpdate:c,showGenderMenu:o,showFollowAdultMenu:u,showTicketTypeMenu:s,followAdultName:d[e.followAdult]}))})),r.a.createElement("section",{className:"add"},r.a.createElement("div",{className:"adult",onClick:a},"\u6dfb\u52a0\u6210\u4eba"),r.a.createElement("div",{className:"child",onClick:l},"\u6dfb\u52a0\u513f\u7ae5")))}),q=(a(70),Object(n.memo)(function(e){var t=e.price,a=e.type;return r.a.createElement("div",{className:"ticket"},r.a.createElement("p",null,r.a.createElement("span",{className:"ticket-type"},a),r.a.createElement("span",{className:"ticket-price"},t)),r.a.createElement("div",{className:"label"},"\u5750\u5e2d"))})),K=a(20),X=(a(71),Object(n.memo)(function(e){var t=e.onPress,a=e.title,n=e.value,l=e.active;return r.a.createElement("li",{className:z()({active:l}),onClick:function(){return t(n)}},a)})),$=Object(n.memo)(function(e){var t=e.show,a=e.options,n=e.onPress,l=e.hideMenu;return r.a.createElement("div",null,t?r.a.createElement("div",{className:"menu-mask",onClick:function(){return l()}}):null,r.a.createElement("div",{className:z()("menu",{show:t})},r.a.createElement("div",{className:"menu-title"}),r.a.createElement("ul",null,a?a.map(function(e){return r.a.createElement(X,Object.assign({key:e.value,onPress:n},e))}):null)))});a(72);var ee=Object(c.b)(function(e){return e},{setTrainnumber:function(e){return{type:v,payload:e}},setDepartstation:function(e){return{type:y,payload:e}},setArrivestation:function(e){return{type:h,payload:e}},setDepartdate:function(e){return{type:g,payload:e}},setSeattype:function(e){return{type:E,payload:e}},setSearchparsed:function(e){return{type:j,payload:e}},fetchInitial:function(e){return function(t){Object(d.a)("".concat("https://www.easy-mock.com/mock/5d6c71f9a4fd821df12f8c4e/reacthook","/rest/order?").concat(Object(m.stringify)(e))).then(function(e){var a=e.data,n=a.departTimeStr,r=a.arriveTimeStr,l=a.arriveDate,i=a.durationStr,c=a.price;t({type:b,payload:n}),t(function(e){return{type:w,payload:e}}(r)),t(function(e){return{type:N,payload:e}}(l)),t(function(e){return{type:T,payload:e}}(i)),t(function(e){return{type:O,payload:e}}(c))})}},createAdult:function(){return function(e,t){var a=t().passengers,n=!0,r=!1,l=void 0;try{for(var i,c=a[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)for(var o=i.value,u=0,d=Object.keys(o);u<d.length;u++)if(!o[d[u]])return}catch(m){r=!0,l=m}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}e(P([].concat(s(a),[{id:++D,name:"",ticketType:"adult",licenceNo:"",seat:"Z"}])))}},createChild:function(){return function(e,t){var a=t().passengers,n=!1,r=!0,l=!1,i=void 0;try{for(var c,o=a[Symbol.iterator]();!(r=(c=o.next()).done);r=!0){for(var u=c.value,d=0,m=Object.keys(u);d<m.length;d++)if(!u[m[d]])return;"adult"===u.ticketType&&(n=u.id)}}catch(p){l=!0,i=p}finally{try{r||null==o.return||o.return()}finally{if(l)throw i}}n?e(P([].concat(s(a),[{id:++D,name:"",ticketType:"child",gender:"none",followAdult:n,seat:"Z"}]))):alert("\u6dfb\u52a0\u513f\u7ae5\u5fc5\u987b\u5148\u6dfb\u52a0\u6210\u4eba")}},removePassenger:function(e){return function(t,a){t(P(a().passengers.filter(function(t){return t.id!==e&&t.followAdult!==e})))}},updatePassenger:M,showGenderMenu:function(e){return function(t,a){var n=a().passengers.find(function(t){return t.id===e});n&&t(I({onPress:function(a){t(M({id:e,gender:a})),t(_())},options:[{title:"\u7537",value:"male",active:"male"===n.gender},{title:"\u5973",value:"female",active:"female"===n.gender}]}))}},hideMenu:_,showFollowAdultMenu:function(e){return function(t,a){var n=a().passengers,r=n.find(function(t){return t.id===e});r&&t(I({onPress:function(a){t(M({id:e,followAdult:a})),t(_())},options:n.filter(function(e){return"adult"===e.ticketType}).map(function(e){return{title:e.name,value:e.id,active:e.id===r.followAdult}})}))}},showTicketTypeMenu:function(e){return function(t,a){var n=a().passengers,r=n.find(function(t){return t.id===e});r&&t(I({onPress:function(a){if("adult"===a)t(M({id:e,ticketType:a,licenceNo:""},["gender","followAdult","birthday"]));else{var r=n.find(function(t){return t.id!==e&&"adult"===t.ticketType});r?t(M({id:e,ticketType:a,gender:"",followAdult:r.id,birthday:""},["licenceNo"])):alert("\u8bf7\u5148\u6dfb\u52a0\u6210\u4eba\u4e58\u5ba2")}t(_())},options:[{title:"\u6210\u4eba\u7968",value:"adult",active:"adult"===r.ticketType},{title:"\u513f\u7ae5\u7968",value:"child",active:"child"===r.ticketType}]}))}}})(function(e){var t=e.trainNumber,a=e.departStation,l=e.arriveStation,i=e.seatType,c=e.departDate,o=e.arriveDate,u=e.departTimeStr,s=e.arriveTimeStr,d=e.durationStr,m=e.price,p=e.passengers,f=e.menu,v=e.isMenuVisible,y=e.searchParsed,h=e.setTrainnumber,E=e.setDepartstation,g=e.setArrivestation,N=e.setDepartdate,b=e.setSeattype,w=e.setSearchparsed,T=e.fetchInitial,O=e.createAdult,S=e.createChild,A=e.removePassenger,k=e.updatePassenger,j=e.showGenderMenu,P=e.hideMenu,C=e.showFollowAdultMenu,D=e.showTicketTypeMenu,M=Object(n.useCallback)(function(){window.history.back()},[]);return Object(n.useEffect)(function(){var e=G.a.parseQuery(window.location.search),t=e.trainNumber,a=e.departStation,n=e.arriveStation,r=e.departDate,l=e.type;h(t),E(a),g(n),N(B()(r).valueOf()),b(l),w(!0)},[g,N,E,w,b,h]),Object(n.useEffect)(function(){y&&T({departStation:a,arriveStation:l,type:i,date:B()(c).format})},[l,c,a,T,y,i]),y?r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"header-wrapper"},r.a.createElement(H.a,{title:"\u8ba2\u5355\u586b\u5199",onBack:M})),r.a.createElement("div",{className:"detail-wrapper"},r.a.createElement(K.a,{departDate:c,arriveDate:o,departTimeStr:u,arriveTimeStr:s,departStation:a,arriveStation:l,trainNumber:t,durationStr:d},r.a.createElement("span",{style:{display:"block"},className:"train-icon"}))),r.a.createElement(q,{price:m,type:i}),r.a.createElement(Y,{passengers:p,createAdult:O,createChild:S,removePassenger:A,onUpdate:k,showGenderMenu:j,showFollowAdultMenu:C,showTicketTypeMenu:D}),p.length>0?r.a.createElement(Q,{passengers:p,updatePassenger:k}):null,r.a.createElement(L,{length:p.length,price:m}),r.a.createElement($,Object.assign({show:v},f,{hideMenu:P}))):null});i.a.render(r.a.createElement(c.a,{store:F},r.a.createElement(ee,null)),document.getElementById("root"))},9:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(0),r=a.n(n);a(16);function l(e){var t=e.onBack,a=e.title;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header-back",onClick:t},r.a.createElement("svg",{width:"42",height:"42"},r.a.createElement("polyline",{points:"25,13 16,21 25,29",stroke:"#fff",strokeWidth:"2",fill:"none"}))),r.a.createElement("h1",{className:"header-title"},a))}}},[[65,6,0,1]]]);
//# sourceMappingURL=order.46a2de2b.chunk.js.map
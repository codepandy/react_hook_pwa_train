(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{10:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(7);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function r(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){Object(a.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},{credentials:"include",headers:new Headers({"Content-Type":"application/json"})},{},t);return fetch(e,n).then(function(e){var t=e.status,n=e.msg;if(t>=200&&t<300)return e;var a=new Error(n);throw a.status=t,a.response=e,a}).then(function(e){return e.json()}).catch(function(e){console.log("\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25\uff01")})}},16:function(e,t,n){},2:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=new Date(e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}n.d(t,"a",function(){return a})},37:function(e,t,n){e.exports=n.p+"static/media/switch.b672b5fb.svg"},38:function(e,t,n){e.exports=n(78)},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(11),i=n.n(r),o=n(6),l=(n(21),n(5)),s=n(13),u=n(10),d=n(8),m="ACTION_SET_FROM",f="ACTION_SET_TO",h="ACTION_SET_IS_CITY_SELECTOR_VISIBLE",y="ACTION_SET_CURRENT_SELECTING_LEFT_CITY",p="ACTION_SET_CITY_DATA",g="ACTION_SET_IS_LOADING_CITY_DATA",v="ACTION_SET_IS_DATE_SELECTOR_VISIBLE",E="ACTION_SET_HIGH_SPEED",C="ACTION_SET_SEARCH_CITY_DATA",w="ACTION_SET_DEPART_DATE";function b(e){return{type:m,payload:e}}function S(e){return{type:f,payload:e}}function D(e){return{type:p,payload:e}}function k(e){return{type:g,payload:e}}function O(){return{type:h,payload:!1}}var N={from:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u5317\u4eac",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case m:return a;default:return e}},to:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u4e0a\u6d77",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case f:return a;default:return e}},isCitySelectorVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case h:return a;default:return e}},currentSelectingLeftCity:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case y:return a;default:return e}},cityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case p:return a;default:return e}},isLoadingCityData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case g:return a;default:return e}},isDateSelectorVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case v:return a;default:return e}},highSpeed:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case E:return a;default:return e}},searchCityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case C:return a;default:return e}},departDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case w:return a;default:return e}}},j=n(15),T=Object(l.d)(Object(l.c)(N),{from:"\u5317\u4eac",to:"\u4e0a\u6d77",isCitySelectorVisible:!1,currentSelectingLeftCity:!1,cityData:null,isLoadingCityData:!1,isDateSelectorVisible:!1,highSpeed:!1,searchCityData:[],departDate:Date.now()},Object(l.a)(j.a)),_=(n(49),n(50),n(9)),A=n(3),I=n.n(A),L=n(2);n(51);function M(e){var t=e.time,n=e.onClick,r=Object(L.a)(t),i=new Date(r),o=Object(a.useMemo)(function(){return I()(r).format("YYYY-MM-DD")},[r]),l=r===Object(L.a)(),s="\u5468"+["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"][i.getDay()]+(l?"(\u4eca\u5929)":""),u=Object(a.useCallback)(function(){n(!0)},[n]);return c.a.createElement("div",{className:"depart-date",onClick:u},c.a.createElement("input",{type:"hidden",name:"date",value:o}),o,c.a.createElement("span",{className:"depart-week"},s))}var B=n(1),x=n.n(B);n(52);function P(e){var t=e.highSpeed,n=e.toggle;return c.a.createElement("div",{className:"high-speed"},c.a.createElement("div",{className:"high-speed-label"},"\u53ea\u770b\u9ad8\u94c1/\u52a8\u8f66"),c.a.createElement("div",{className:"high-speed-switch",onClick:function(){return n()}},c.a.createElement("input",{type:"hidden",name:"highSpeed",value:t}),c.a.createElement("div",{className:x()("high-speed-track",{checked:t})},c.a.createElement("span",{className:x()("high-speed-handle",{checked:t})}))))}n(53);var Y=n(37),V=n.n(Y);function R(e){var t=e.from,n=e.to,a=e.exchangeFromTo,r=e.showCitySelector;return c.a.createElement("div",{className:"journey"},c.a.createElement("div",{className:"journey-station",onClick:function(){r(!0)}},c.a.createElement("input",{type:"text",readOnly:!0,className:"journey-input",name:"from",value:t})),c.a.createElement("div",{className:"journey-switch",onClick:a},c.a.createElement("img",{className:"journey-switch-reverse",src:V.a,alt:"\u5207\u6362\u57ce\u5e02",width:"70",height:"40"})),c.a.createElement("div",{className:"journey-station",onClick:function(){r(!1)}},c.a.createElement("input",{type:"text",readOnly:!0,className:"journey-input",name:"to",value:n})))}n(54);var F=Object(a.memo)(function(){return c.a.createElement("div",{className:"submit"},c.a.createElement("button",{type:"submit",className:"submit-button"},"\u641c\u7d22"))}),H=n(4),W=(n(55),Object(a.memo)(function(e){var t=e.name,n=e.onSelect;return c.a.createElement("li",{className:"city-li",onClick:function(){return n(t)}},t)})),J=Object(a.memo)(function(e){var t=e.title,n=e.cities,a=void 0===n?[]:n,r=e.onSelect;return c.a.createElement("ul",{className:"city-ul"},c.a.createElement("li",{className:"city-li",key:t,"data-cate":t},t),a.map(function(e){return c.a.createElement(W,{key:e.name,name:e.name,onSelect:r})}))}),U=Object(a.memo)(function(e){var t=e.alpha,n=e.onClick,r=Object(a.useCallback)(function(){n(t)},[t,n]);return c.a.createElement("i",{className:"city-index-item",onClick:r},t)}),G=Object(a.memo)(function(e){var t=e.sections,n=e.onSelect,a=e.toAlpha;return c.a.createElement("div",{className:"city-list"},c.a.createElement("div",{className:"city-cate"},t.map(function(e){return c.a.createElement(J,{key:e.title,title:e.title,cities:e.citys,onSelect:n})})),c.a.createElement("div",{className:"city-index"},K.map(function(e){return c.a.createElement(U,{alpha:e,key:e,onClick:a})})))}),K=Array.from(new Array(26),function(e,t){return String.fromCharCode(65+t)}),q=Object(a.memo)(function(e){var t=e.name,n=e.onClick;return c.a.createElement("li",{className:"city-sugget-li",onClick:function(){return n(t)}},t)}),$=Object(a.memo)(function(e){var t=e.searchKey,n=e.onSelect,r=e.searchCityData,i=e.fetchCityDataByCity;Object(a.useEffect)(function(){i({key:t})},[i,t]);var o=Object(a.useMemo)(function(){return r.length?r:[{display:t}]},[r,t]);return c.a.createElement("div",{className:"city-suggest"},c.a.createElement("ul",{className:"city-suggest-ul"},o.map(function(e){return c.a.createElement(q,{key:e.display,name:e.display,onClick:n})})))}),z=Object(a.memo)(function(e){var t=Object(a.useState)(""),n=Object(H.a)(t,2),r=n[0],i=n[1],o=e.show,l=e.cityData,s=e.isLoading,u=e.onBack,d=e.fetchCityData,m=e.onSelect,f=e.fetchCityDataByCity,h=e.searchCityData,y=Object(a.useMemo)(function(){return r.trim()},[r]),p=Object(a.useCallback)(function(e){i(e.target.value)},[]);Object(a.useEffect)(function(){!o||l||s||d()},[l,d,s,o]);var g=function(e){document.querySelector("[data-cate='".concat(e,"']")).scrollIntoView()};return c.a.createElement("div",{className:x()("city-selector",{hidden:!o})},c.a.createElement("div",{className:"city-search"},c.a.createElement("div",{className:"search-back",onClick:u},c.a.createElement("svg",{width:"42",height:"42"},c.a.createElement("polyline",{points:"25,13 16,21 25,29",stroke:"#fff",strokeWidth:"2",fill:"none"}))),c.a.createElement("div",{className:"search-input-wrapper"},c.a.createElement("input",{type:"text",className:"search-input",value:r,placeholder:"\u57ce\u5e02\u3001\u8f66\u7ad9\u7684\u4e2d\u6587\u6216\u62fc\u97f3",onChange:p})),c.a.createElement("i",{onClick:function(){i("")},className:x()("search-clean",{hidden:0===y.length})},"\uf063")),Boolean(y)?c.a.createElement($,{searchKey:y,onSelect:function(e){return m(e)},fetchCityDataByCity:f,searchCityData:h}):null,s?c.a.createElement("div",null,"loading"):l?c.a.createElement(G,{sections:l.cityData.cityList,onSelect:m,toAlpha:g}):c.a.createElement("div",null,"loading"))});n(56);function Q(e){var t=e.day,n=e.onSelect,a=Object(L.a)();return c.a.createElement("td",{className:x()({null:!t},{disabled:t&&t<a},{weekend:[0,6].includes(new Date(t).getDay())}),onClick:function(){return n(t)}},t?t===a?"\u4eca\u5929":new Date(t).getDate():"")}function X(e){var t=e.days,n=e.onSelect;return c.a.createElement("tr",{className:"date-table-days"},t.map(function(e,t){return c.a.createElement(Q,{key:t,day:e,onSelect:n})}))}function Z(e){for(var t=e.startingTimeInMonth,n=e.onSelect,a=new Date(t),r=new Date(t),i=[];a.getMonth()===r.getMonth();)i.push(r.getTime()),r.setDate(r.getDate()+1);i=new Array(a.getDay()?a.getDay()-1:6).fill(null).concat(i);for(var o=new Date(i[i.length-1]),l=[],s=0,u=(i=i.concat(new Array(o.getDay()?7-o.getDay():0))).length/7;s<u;s++)l.push(i.slice(7*s,7*(s+1)));return c.a.createElement("table",{className:"date-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"7"},c.a.createElement("h5",null,"".concat(a.getFullYear(),"\u5e74").concat(a.getMonth(),"\u6708"))))),c.a.createElement("tbody",null,c.a.createElement("tr",{className:"date-table-weeks"},["\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94"].map(function(e){return c.a.createElement("th",{key:e},e)}),c.a.createElement("th",{className:"weekend"},"\u5468\u516d"),c.a.createElement("th",{className:"weekend"},"\u5468\u65e5")),l.map(function(e,t){return c.a.createElement(X,{days:e,key:t,onSelect:n})})))}function ee(e){var t=e.show,n=e.onSelect,r=e.onBack,i=Object(a.useCallback)(function(){r(!1)},[r]),o=new Date;o.setDate(1),o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0);var l=[o.getTime()];return o.setMonth(o.getMonth()+1),l.push(o.getTime()),o.setMonth(o.getMonth()+1),l.push(o.getTime()),c.a.createElement("div",{className:x()("date-selector",{hidden:!t})},c.a.createElement(_.a,{title:"\u65e5\u671f\u9009\u62e9",onBack:i}),c.a.createElement("div",{className:"date-selector-tables"},l.map(function(e){return c.a.createElement(Z,{key:e,startingTimeInMonth:e,onSelect:n})})))}var te=Object(o.b)(function(e){return e},{onExchangeFromTo:function(){return function(e,t){var n=t(),a=n.from;e(b(n.to)),e(S(a))}},onShowCitySelector:function(e){return function(t){t({type:h,payload:!0}),t({type:y,payload:e})}},onFetchCityData:function(){return function(e,t){if(!t().isLoadingCityData){var n=JSON.parse(localStorage.getItem(d.a)||"{}");if(n.expires&&n.expires>Date.now())return e(D(n)),void e(k(!1));Object(u.a)("".concat("https://www.fastmock.site/mock/36f5aae2666808101e4821ce39e2a27c","/rest/citys?_").concat(Date.now())).then(function(t){var n=t.data;localStorage.setItem(d.a,JSON.stringify(n)),e(D(n)),e(k(!1))})}}},setSelectedCity:function(e){return function(t,n){t(n().currentSelectingLeftCity?b(e):S(e)),t(O())}},hideCitySelector:O,fetchCityDataByCity:function(e){return function(t){Object(u.a)("".concat("https://www.fastmock.site/mock/36f5aae2666808101e4821ce39e2a27c","/rest/searchCity?").concat(Object(s.stringify)(e))).then(function(e){var n=e.data.result;t({type:C,payload:n})})}},SetDateSelectorVisible:function(e){return{type:v,payload:e}},setDepartDate:function(e){return{type:w,payload:e}},toggleHighSpeed:function(){return function(e,t){var n=t().highSpeed;return e({type:E,payload:!n})}}})(function(e){var t=e.from,n=e.to,r=e.onExchangeFromTo,i=e.isCitySelectorVisible,o=e.cityData,l=e.isLoadingCityData,s=e.onShowCitySelector,u=e.onFetchCityData,d=e.setSelectedCity,m=e.hideCitySelector,f=e.fetchCityDataByCity,h=e.searchCityData,y=e.SetDateSelectorVisible,p=e.departDate,g=e.isDateSelectorVisible,v=e.setDepartDate,E=e.toggleHighSpeed,C=e.highSpeed,w=Object(a.useCallback)(function(){window.history.back()},[]),b=Object(a.useCallback)(function(e){return s(e)},[s]),S=Object(a.useCallback)(function(e){!e||e<Object(L.a)()||(v(e),y(!1))},[y,v]);return c.a.createElement("div",null,c.a.createElement("div",{className:"header-wrapper"},c.a.createElement(_.a,{title:"\u706b\u8f66\u7968",onBack:w})),c.a.createElement("form",{action:"./query.html",className:"form"},c.a.createElement(R,{from:t,to:n,exchangeFromTo:r,showCitySelector:b}),c.a.createElement(M,{onClick:y,time:p}),c.a.createElement(P,{highSpeed:C,toggle:E}),c.a.createElement(F,null)),c.a.createElement(z,{show:i,cityData:o,isLoading:l,onBack:m,fetchCityData:u,onSelect:d,fetchCityDataByCity:f,searchCityData:h}),c.a.createElement(ee,{show:g,onBack:y,onSelect:S}))}),ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(c.a.createElement(o.a,{store:T},c.a.createElement(te,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");ne?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ae(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ae(t,e)})}}()},8:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var a="CITY_DATA_CATCH_KEY",c={orderDepart:1,orderDuration:2}},9:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(0),c=n.n(a);n(16);function r(e){var t=e.onBack,n=e.title;return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header-back",onClick:t},c.a.createElement("svg",{width:"42",height:"42"},c.a.createElement("polyline",{points:"25,13 16,21 25,29",stroke:"#fff",strokeWidth:"2",fill:"none"}))),c.a.createElement("h1",{className:"header-title"},n))}}},[[38,5,0]]]);
//# sourceMappingURL=index.4a33dfab.chunk.js.map